/*! half_moon_reading 2015-10-25 */
var app=angular.module("TheTripApp",[]);app.controller("WordController",["$scope","$http","$timeout",function(a,b,c){a.dataArray=[];var d=["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"],e=["a","e","i","o","u"],f=[],g=0,h=0,i=0;randomWord=function(a){var b=Math.floor(Math.random()*a.length);return b},randomLetter=function(a){var b=Math.floor(Math.random()*a.length);return b};var j=function(){function b(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a}h%3==0&&0!==f.length||f.length>=3?(i=f.shift(),console.log("using incorrect word")):(i=randomWord(a.dataArray),console.log("using correct word")),a.word=a.dataArray[i].word,chosenIndex=randomLetter(a.word),chosenLtr=a.word[chosenIndex],String.prototype.replaceAt=function(a,b){return this.substr(0,a)+b+this.substr(a+b.length)},a.word=a.word.replaceAt(chosenIndex," "),a.word[chosenIndex]=" ";var c=[];if(c.push(chosenLtr),"a"==chosenLtr||"e"==chosenLtr||"i"==chosenLtr||"o"==chosenLtr||"u"==chosenLtr)for(var g=0;2>g;g++){for(var j=e[randomLetter(e)];j==c[0]||j==c[1];)var j=e[randomLetter(e)];c.push(j)}else for(var k=0;2>k;k++){for(var j=d[randomLetter(d)];j==c[0]||j==c[1];)var j=d[randomLetter(d)];c.push(j)}a.shuffledArray=b(c),a.shuffledArray=a.shuffledArray,a.image=a.dataArray[i].img},k=function(a){f.push(a),console.log("Pushed incorrect word")},l=function(){a.numCorrect+=1,h+=1,console.log("added one to correct counter")},m=function(){g+=1,h+=1,console.log("added one to incorrect counter")};b({method:"GET",url:"/word/getWords"}).then(function(b){for(var d=0;d<b.data.length;d++)a.dataArray.push(b.data[d]);j(),a.numCorrect=0,a.correctCounter=function(b){b==chosenLtr?(l(),console.log("incorrectArray remains = ",f),a.image="/images/thumbs-up.svg",console.log("chosenIndex",chosenIndex),a.word=a.word.replaceAt(chosenIndex,chosenLtr)):(k(i),console.log("Got one wrong = ",f),m(),console.log("Incorrect counter = ",g)),c(j,2e3)}})}]);