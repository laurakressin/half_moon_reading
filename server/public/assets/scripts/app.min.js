/*! half_moon_reading 2015-11-02 */
var app=angular.module("TheTripApp",["ngRoute"]);app.controller("WordController",["$scope","$http","$timeout","$interval","$location",function(a,b,c,d,e){a.dataArray=[];var f=["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"],g=["a","e","i","o","u"];a.numAsked=5;var h=[],i=0,j=[];a.numAnswered=0;var k=0;a.firstPerc=0,a.secondPerc=0,a.thirdPerc=0,a.firstHeight="140px",a.secondHeight="140px",a.thirdHeight="140px",a.firstTop="675px",a.secondTop="730px",a.thirdTop="761px",a.pickedMonsterFir=function(){a.monster=1,a.secondRunner="/assets/images/runner.png",a.firstRunner="/assets/images/sprinter.png",a.thirdRunner="/assets/images/flyer.png",e.path("/game"),a.firstPerc=-5,a.secondPerc=-3,a.thirdPerc=0,a.firstLeft=a.firstPerc+"%",a.secondLeft=a.secondPerc+"%",a.thirdLeft=a.thirdPerc+"%"},a.pickedMonsterSec=function(){a.monster=2,a.secondRunner="/assets/images/sprinter.png",a.firstRunner="/assets/images/runner.png",a.thirdRunner="/assets/images/flyer.png",e.path("/game"),a.firstPerc=-3,a.secondPerc=-5,a.thirdPerc=0,a.firstLeft=a.firstPerc+"%",a.secondLeft=a.secondPerc+"%",a.thirdLeft=a.thirdPerc+"%"},a.pickedMonsterThir=function(){a.monster=3,a.secondRunner="/assets/images/flyer.png",a.firstRunner="/assets/images/sprinter.png",a.thirdRunner="/assets/images/runner.png",e.path("/game"),a.firstPerc=-5,a.secondPerc=0,a.thirdPerc=-3,a.firstLeft=a.firstPerc+"%",a.secondLeft=a.secondPerc+"%",a.thirdLeft=a.thirdPerc+"%",a.secondTop="683px"},randomWord=function(a){for(var b=Math.floor(Math.random()*a.length),c=0;c<j.length;c++)b==c&&randomWord(a);return j.push(b),j.length>5&&j.shift(),b},randomLetter=function(a){var b=Math.floor(Math.random()*a.length);return b};var l=function(){function b(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a}k=a.numAnswered%3==0&&0!==h.length||h.length>=3?h.shift():randomWord(a.dataArray),a.word=a.dataArray[k].word,chosenIndex=randomLetter(a.word),chosenLtr=a.word[chosenIndex],String.prototype.replaceAt=function(a,b){return this.substr(0,a)+b+this.substr(a+b.length)},a.word=a.word.replaceAt(chosenIndex," "),a.word[chosenIndex]=" ";var c=[];if(c.push(chosenLtr),"a"==chosenLtr||"e"==chosenLtr||"i"==chosenLtr||"o"==chosenLtr||"u"==chosenLtr)for(var d=0;2>d;d++){for(var e=g[randomLetter(g)];e==c[0]||e==c[1];)var e=g[randomLetter(g)];c.push(e)}else for(var i=0;2>i;i++){for(var e=f[randomLetter(f)];e==c[0]||e==c[1];)var e=f[randomLetter(f)];c.push(e)}a.shuffledArray=b(c),a.shuffledArray=a.shuffledArray,a.image=a.dataArray[k].img},m=function(a){h.push(a)},n=function(){a.numCorrect+=1},o=function(){i+=1};a.isComplete=function(b){return p(a.numCorrect,a.numAnswered),b>=a.numAsked?!0:!1};var p=function(b,c){return b+c==c?a.success="tied":a.success="won",a.success},q=function(){a.word=a.word.replaceAt(chosenIndex,chosenLtr),a.word[chosenIndex]=chosenLtr},r=function(){a.firstPerc+=40/a.numAsked/10,a.secondPerc+=40/a.numAsked/10,a.thirdPerc+=40/a.numAsked/10,a.firstLeft=a.firstPerc+"%",a.secondLeft=a.secondPerc+"%",a.thirdLeft=a.thirdPerc+"%"},s=function(){d(r,100,10)},t=function(){a.secondPerc+=50/a.numAsked/10,a.secondLeft=a.secondPerc+"%"},u=function(){d(t,100,10)};b({method:"GET",url:"/word/getWords"}).then(function(b){for(var d=0;d<b.data.length;d++)a.dataArray.push(b.data[d]);l(),a.numCorrect=0,a.correctCounter=function(b){a.numAnswered+=1,b==chosenLtr?(n(),q(),a.image="/images/thumbs-up.svg",u()):(m(k),o()),a.isComplete(a.numAnswered,a.numCorrect),c(l,1e3);s()},a.again=function(){a.numAnswered=0,a.numCorrect=0,h=[],1==a.monster?a.pickedMonsterFir():2==a.monster?a.pickedMonsterSec():a.pickedMonsterThir(),l()}})}]),app.config(function(a,b){a.when("/",{templateUrl:"/views/pickMonster.html"}).when("/game",{templateUrl:"/views/game.html",css:"/views/gameStylesheet.css"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)});