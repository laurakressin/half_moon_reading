/*! half_moon_reading 2015-10-26 */
var app=angular.module("TheTripApp",[]);app.controller("WordController",["$scope","$http","$timeout","$interval",function(a,b,c,d){a.dataArray=[];var e=["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"],f=["a","e","i","o","u"],g=[],h=0;a.numAnswered=0;var i=0,j=-1,k=-2,l=1;randomWord=function(a){var b=Math.floor(Math.random()*a.length);return b},randomLetter=function(a){var b=Math.floor(Math.random()*a.length);return b};var m=function(){function b(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a}i=a.numAnswered%3==0&&0!==g.length||g.length>=3?g.shift():randomWord(a.dataArray),a.word=a.dataArray[i].word,chosenIndex=randomLetter(a.word),chosenLtr=a.word[chosenIndex],String.prototype.replaceAt=function(a,b){return this.substr(0,a)+b+this.substr(a+b.length)},a.word=a.word.replaceAt(chosenIndex," "),a.word[chosenIndex]=" ";var c=[];if(c.push(chosenLtr),"a"==chosenLtr||"e"==chosenLtr||"i"==chosenLtr||"o"==chosenLtr||"u"==chosenLtr)for(var d=0;2>d;d++){for(var h=f[randomLetter(f)];h==c[0]||h==c[1];)var h=f[randomLetter(f)];c.push(h)}else for(var j=0;2>j;j++){for(var h=e[randomLetter(e)];h==c[0]||h==c[1];)var h=e[randomLetter(e)];c.push(h)}a.shuffledArray=b(c),a.shuffledArray=a.shuffledArray,a.image=a.dataArray[i].img},n=function(a){g.push(a)},o=function(){a.numCorrect+=1},p=function(){h+=1};a.isComplete=function(b){return q(a.numCorrect,a.numAnswered),b>=3?!0:!1};var q=function(b,c){return b+c==c?a.success="tied":a.success="won",a.success},r=function(){j+=.2,k+=.2,l+=.2,a.firstLeft=j+"%",a.secondLeft=k+"%",a.thirdLeft=l+"%",a.stop+=1,console.log("stop",a.stop)};a.stop=0;var s=function(){d(r,100,10)},t=function(){k+=.2,a.secondLeft=k+"%"},u=function(){d(t,100,10)};b({method:"GET",url:"/word/getWords"}).then(function(b){for(var d=0;d<b.data.length;d++)a.dataArray.push(b.data[d]);m(),a.numCorrect=0,a.correctCounter=function(b){a.numAnswered+=1,b==chosenLtr?(o(),a.image="/images/thumbs-up.svg",u()):(n(i),p()),a.isComplete(a.numAnswered,a.numCorrect),c(m,1e3);s()},a.again=function(){a.numAnswered=0,a.numCorrect=0,g=[],j=-1,k=-2,l=1,a.firstLeft=j+"%",a.secondLeft=k+"%",a.thirdLeft=l+"%",m()}})}]);